<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.0.2/chart.min.js"
        integrity="sha512-dnUg2JxjlVoXHVdSMWDYm2Y5xcIrJg1N+juOuRi0yLVkku/g26rwHwysJDAMwahaDfRpr1AxFz43ktuMPr/l1A=="
        crossorigin="anonymous">
    </script>
    <link rel="stylesheet" href="./financeiro.css">
    <title>Financeiro</title>
</head>

<body class="imagem_fundo">

    <!-- INICÍO DO HEADER -->

    <div class="cabecalho">
        <div class="caixa">
            <div class="logo">
                <a href="home.html"><img src="./wisoy.png" alt="logo WiSoy">
                    <span>WiSoy</span>
                </a>
            </div>
            <nav>
                <ul>
                    <li><a href="home.html">Home</a></li>
                    <li class="li_sobre"><a href="sobre.html">Sobre</a></li>
                    <li><a href="portfolio.html">Portfolio</a></li>
                    <li><a href="contato.html">Contato</a></li>
                    <li><a href="log in.html">Log In</a></li>
                </ul>
            </nav>
        </div>
    </div>
    <!-- FIM DO HEADER -->


    <!-- INICÍO DO SIMULADOR -->

    <div class="corpo_colunas">
        <div class="colunas">
            <div class="coluna_esquerda">
                <div class="corpo_simulador">
                    <img onclick="abrirGrafico2()" id="imgWiSoy" src="wisoy.png" alt="Logo WiSoy">
                    <form class="formulario">
                        <div class="inputs">
                            Área de cultivo em hectares: <br>
                            <input type="text" id="inp_area" placeholder="Área de cultivo em hectares">
                        </div>
                        <div class="inputs">
                            Quantidade de safras: <br>
                            <input type="text" id="inp_colheitas" oninput="filterDiasLength()"
                                placeholder="Número de colheitas">
                        </div>

                        <div class="div_select inputs">Selecione abaixo o estado da safra:

                            <select id="sel_estado" onchange="selecionar()">
                                <option value="0">-- Selecione o seu estado (UF): --</option>
                                <option value="1">AC</option>
                                <option value="2">AL</option>
                                <option value="3">AP</option>
                                <option value="4">AM</option>
                                <option value="5">BA</option>
                                <option value="6">CE</option>
                                <option value="7">DF</option>
                                <option value="8">ES</option>
                                <option value="9">GO</option>
                                <option value="10">MA</option>
                                <option value="11">MT</option>
                                <option value="12">MS</option>
                                <option value="13">MG</option>
                                <option value="14">PA</option>
                                <option value="15">PB</option>
                                <option value="16">PR</option>
                                <option value="17">PE</option>
                                <option value="18">PI</option>
                                <option value="19">RJ</option>
                                <option value="20">RN</option>
                                <option value="21">RS</option>
                                <option value="22">RO</option>
                                <option value="23">RR</option>
                                <option value="24">SC</option>
                                <option value="25">SP</option>
                                <option value="26">SE</option>
                                <option value="27">TO</option>
                            </select>
                        </div>
                        <div class="div_select" id="mensagem_valor_safra"></div>
                        <button onclick="calculo();">Simular Rendimento</button>
                </div>
            </div>
            </form>

            <div class="coluna_direita" id="coluna_direita">
                <div class="caixa_direita">
                    <div class="caixa_superior">
                        <Div id="div_resultado" class="resultado">Ganho estimado em R$</Div>
                    </div>
                    <div class="caixa_inferior">
                        <div class="grafico">
                            <canvas id="chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FIM DO SIMULADOR -->


    <!-- INICÍO DO RODAPÉ -->
    <div class="rodape">Copyright &copy 2021 - Todos os direitos reservados - WiSoy</div>
    <!-- FIM DO RODAPÉ-->


</body>

</html>

<script>
    function abrirGrafico2() {
        coluna_direita.style = 'display: block; float: left;';
    }

    function filterDiasLength() {

        setTimeout(() => {
            const monthValue = document.getElementById('inp_colheitas').value;

            SAFRAS.length = monthValue;

            myChart.destroy();
            myChart = new Chart(
                document.getElementById('chart'),
                config
            );
        }, 500);
    }

    SAFRAS = [
        '1',
        '2',
        '3',
        '4',
        '5',
        '6',
        '7',
        '8',
        '9',
        '10'
    ];

    const data = {
        labels: SAFRAS,
        datasets: [{
            label: 'Histórico de safras realizadas',
            data: [5, 11, 17, 24, 29, 35, 43, 51, 62, 75],
            fill: false,
            borderColor: 'rgb(75, 192, 192)',
            tension: 0.1,
            backgroundColor: 'rgba(255, 159, 64, 1)',
        }]

    };

    const config = {
        type: 'line',
        data: data,
    };

    var myChart = new Chart(
        document.getElementById('chart'),
        config
    );


    function selecionar() {

        var valorSaca = sel_estado.value;

        if (valorSaca == 1) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 161,00`;
        } else if (valorSaca == 2) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 158,00`;
        } else if (valorSaca == 3) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 159,00`;
        } else if (valorSaca == 4) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 174,00`;
        } else if (valorSaca == 5) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 162,00`;
        } else if (valorSaca == 6) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 172,00`;
        } else if (valorSaca == 7) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 164,00`;
        } else if (valorSaca == 8) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 175,00`;
        } else if (valorSaca == 9) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 161,00`;
        } else if (valorSaca == 10) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 168,00`;
        } else if (valorSaca == 11) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 165,50`;
        } else if (valorSaca == 12) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 159,00`;
        } else if (valorSaca == 13) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 162,00`;
        } else if (valorSaca == 14) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 172,00`;
        } else if (valorSaca == 15) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 166,00`;
        } else if (valorSaca == 16) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 173,00`;
        } else if (valorSaca == 17) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 174,00`;
        } else if (valorSaca == 18) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 164,00`;
        } else if (valorSaca == 19) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 166,00`;
        } else if (valorSaca == 20) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 175,00`;
        } else if (valorSaca == 21) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 165,00`;
        } else if (valorSaca == 22) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 173,00`;
        } else if (valorSaca == 23) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 170,00`;
        } else if (valorSaca == 24) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 162,00`;
        } else if (valorSaca == 25) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 160,00`;
        } else if (valorSaca == 26) {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 165,00`;
        } else {
            mensagem_valor_safra.innerHTML = `Valor da saca: R$ 167,00`;
        }
    }

    function calculo() {

        // Recebe o valor que o usuário insere em inp_area.
        var area = Number(inp_area.value);

        // Recebe o valor que o usuário insere em inp_safras.
        var safra = Number(inp_colhe.value);

        // O valor da saca de soja 
        var valorSaca = Number(sel_estado.value);

        // Recebe o número de sensores necessários para o tamanho do plantio descrito, sendo 1 sensor para cada 30 hectares.
        var sensores = area / 30;
        sensores = Math.ceil(sensores);

        // Recebe o custo cobrado pela mão de obra WiSoy para implementar a solução por sensor.
        var implantacao = 500;

        // Recebe o valor do investimento inicial, sendo o número de sensores multiplicados por valor da mão de obra.
        var investimentoInicial = implantacao * sensores;

        // Valor da assinatura para 1 sensor
        var assinatura = 300;

        /* Recebe o custo mensal da assinatura que cobre manutenções futuras e quaisquer tipos de ocorrência relacionadas aos serviços WiSoy. Sendo o custo baseado na
        quantidade de sensores que o cliente possui em seu plantio */
        var custoMensal = sensores * assinatura;

        // Tempo para a colheita da safra em meses
        var cicloSafra = 4;

        // Uma safra é igual a 55 sacas por hectar
        var safraSacas = 55;

        // Logo o valor de uma safra valor inserido de sacas x valor inserido da saca;
        var ganhoHectare = valorDaSaca * safraSacas;

        /* Portanto, o rendimento do cliente sem o uso de sensores será o número número de safras multiplicado pelo valor de cada safra multiplicado pelo número de
        hectares */
        var rendimentoComum = safra * ganhoHectare * area;

        /* Rendimento com serviços WiSoy */

        //R$495 Reais em cada safra por hectare é o que a WiSoy estima em ganhos para o cliente.
        // Segundo o "Institute of Agriculture and Natural Resources" na universidade de Nebraska-Lincoln, otimizar a umidade do solo no
        // cultivo de soja pode levar a um aumento de até 5,43% no rendimento. A linha abaixo subtrai do rendimento total wisoy os custos 
        // considerando uma safra = 120 dias = 4 meses 
        var rendimentoWisoy = safra * (ganhoHectare * 1.0543) * area - (investimentoInicial + custoMensal * safra *
            cicloSafra);
        rendimentoWisoy = rendimentoWisoy.toFixed(2);

        /* Diferença de rendimento comum e Wisoy*/
        var diferencaRendimento = rendimentoWisoy - rendimentoComum;
        diferencaRendimento = diferencaRendimento.toFixed(2);


        div_resultado.innerHTML = `Ganho estimado em R$ ${rendimentoWisoy}`;
    }
</script>